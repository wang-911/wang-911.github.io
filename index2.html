<!DOCTYPE html>
<html ondragstart="return false">
	<head>
		<meta charset="utf-8" />
		<meta name="keywords" content="" />
		<meta name="description" content="" />
		<title>JS开发3D旋转相册</title>
		<style>
			body {
				margin: 0;
				background: #000;
				overflow: hidden;
			}
			#perspective {
				perspective: 800px;/* 场景的景深*/
			}
			
				
			
			#wrap {
				position: relative;/* 相对定位*/
				width: 50px;
				height: 50px;
				margin:200px auto ;
				transform-style: preserve-3d ;/* 设置3D场景风格*/
				transform: rotateX(-20deg) rotateY(0deg);/* 旋转度数*/
			}
				
			#wrap img {
				position: absolute;/* 绝对定位 */
			}
			
		</style>
		
	</head>
	<body>
		<div id="perspective">
			<div id="wrap">
				<img src="img/1.jpg" alt="" />
				<img src="img/2.jpg" alt="" />
				<img src="img/3.jpg" alt="" />
				<img src="img/4.jpg" alt="" />
				<img src="img/5.jpg" alt="" />
				<img src="img/6.jpg" alt="" />
				<img src="img/7.jpg" alt="" />
				<img src="img/8.jpg" alt="" />
				<img src="img/9.jpg" alt="" />
				<img src="img/10.jpg" alt="" />
				<img src="img/11.jpg" alt="" />
			</div>
		</div>
	</body> 
	<script>
		var oImg = document.getElementsByTagName('img');
		
		var length = oImg.length;
		
		var deg = 360/length;
		
		var oWrap = document.getElementById('wrap');
		
		//页面内容加载完毕之后再执行的JS代码
		window.onload = function () {
			
			//遍历到所以的图片 访问一个数组或集合中的元素 访问之后会做一些什么事情
			Array.prototype.forEach.call(oImg , function(ele,index,self){
				ele.style.transform = "rotateY("+deg*index+"deg) translateZ(350px)";
				ele.style.transition = "1s " + (length-index)*0.1 +"s";
			});
		}
		
		/*
			1.拖拽
					鼠标划过页面 相册旋转 改变的是什么值wrap相册的transform rotateX & Y的值
			怎么求这个值
					产生在什么时候
					
					移动鼠标的过程中
					
					按下鼠标  不松开 移动过程中计算  松开之后 就停止计算
		
					每一次移动  相册旋转多少
					两次鼠标移动位置的差值 就是移动的距离
					新的位置-上一次的位置 = 差值
					
		*/
	 
	 //鼠标点击事件
	 var newX,newY,lastX,lastY,minusX,minusY,rotX = -20,rotY = 0;
	 
	 document.onmousedown = function (e){
		 //第一次旧的值产生与第一次点击的时候
		 lastX = e.clientX;
		 lastY = e.clientY;
		 
		 /* console.log("点击"); */
		 //鼠标移动事件
		 this.onmousemove = function (e){
			/* console.log("移动");*/
			newX = e.clientX,
			newY = e.clientY;
			
			//假设 求出上个值
			minusX = newX - lastX;
			minusY = newY - lastY;
			
			rotX -= minusY*0.2;
			rotY += minusX*0.1;//差值累加成为一个旋转度数
			
			oWrap.style.transform = "rotateX("+rotX+"deg) rotateY("+rotY+"deg)"
			
			//新的位置值在用完之后 就变成就旧的值
			lastX = newX;
			lastY = newY;
			
		 }
		 //鼠标松开事件
		 this.onmouseup = function(e){
			 /* console.log("松开"); */
			 this.onmousemove = null;
		 }
		 
		 
	 }
			
		
		
	
	</script>
</html>
<!-- 
		1.如何设置3D场景布局	
		2.给元素设置3D风格
		
	旋转整个相册 就是改变元素的rotateX 和rotateY的值
	
 -->
